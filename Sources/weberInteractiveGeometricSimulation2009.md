---
aliases: ["Weber et al. (2009) Interactive Geometric Simulation of 4D Cities"]
tags: [ðŸ’Ž, buildings, plots, roads, step/generation, type/reference]
year: 2009
---
# Interactive Geometric Simulation of 4D Cities [ðŸ“–](zotero://select/library/items/RM76LIZ2)

> [!abstract]-
> 
> We present a simulation system that can simulate a three-dimensional urban model over time. The main novelty of our approach is that we do not rely on land-use simulation on a regular grid, but instead build a complete and inherently geometric simulation that includes exact parcel boundaries, streets of arbitrary orientation, street widths, 3D street geometry, building footprints, and 3D building envelopes. The second novelty is the fast simulation time and user interaction at interactive speed of about 1 second per time step.
> 

> [!quote]- Citations
> 
> ```query
> content: "@weberInteractiveGeometricSimulation2009" -file:@weberInteractiveGeometricSimulation2009
> ```

%% begin notes %%
## Permanent notes
### Initial thoughts:


### Relations:


### Summary


%% end notes %%
## Reading notes
%% begin annotations %%

Imported on 2024-04-30 23:30



- & we do not rely on land-use simulation on a regular grid, [(p. 1)](zotero://open-pdf/library/items/FPSSLQKL?page=1&annotation=U89MWQLA) 
- & fast simulation time [(p. 1)](zotero://open-pdf/library/items/FPSSLQKL?page=1&annotation=Z55FAYYZ) 

- $ ****  [(p. 2)](zotero://open-pdf/library/items/FPSSLQKL?page=2&annotation=4L8BQLZ9) ![[_Vault/_Attachments/image-2-x66-y624.png]]


- & Our work is most closely related to procedural urban modeling, especially street network modeling through L-systems. [(p. 2)](zotero://open-pdf/library/items/FPSSLQKL?page=2&annotation=EFXAHZR8) 
- [ ] **check sources**:
	- & several authors adapted the idea of L-systems to street network modeling [PM01, CEWâˆ—08, CBAN07]. [(p. 2)](zotero://open-pdf/library/items/FPSSLQKL?page=2&annotation=UXLJD28V) 
- [ ] **check**:
	- & Urban simulation in urban planning and social sciences became fairly complex and current systems combine several methods such as spatial interactions using gravity models [Gol71], cellular automata [Cou97,Ben97], agent-based modeling [LZ98a, LZ98b], random utility theory [Mcf74], and rule-based simulation [Klo99]. A good review of existing urban simulation can be found in [WU04]. The probably most advanced and comprehensive system for regional simulation is UrbanSim [Wad02, WBNâˆ—03]. [(p. 2)](zotero://open-pdf/library/items/FPSSLQKL?page=2&annotation=98YJGCQY) 
- & Initial urban simulation work in computer graphics improves the visual quality of the output by adding geometry [HMFN04, Wat07, LWWâˆ—07] or image fragments [AVB08,VABW08] in a post process. [(p. 2)](zotero://open-pdf/library/items/FPSSLQKL?page=2&annotation=TEEHUDHY) 
- [ ] **check**:
	- & The creation of a geometric urban simulation requires studying urban design and land use planning. There are several interesting books that we can recommend [Pun99, Leu03,BGKR06] [(p. 2)](zotero://open-pdf/library/items/FPSSLQKL?page=2&annotation=K6K4DALC) 
- & The street network is a planar graph (V,E) with nodes V and linear edges E. The nodes node[i] âˆˆ V have the following attributes: a two-dimensional location node[i].pos âˆˆ R2, a flag to denote the hierarchy node[i].hierarchy âˆˆ {ma jor,minor} and the growth flag node[i].growth âˆˆ {un finished, finished}. <br />
The edges street[ j] âˆˆ E are line segments with the following attributes: the indices street[ j].nodes âˆˆ IN2, the status [(p. 2)](zotero://open-pdf/library/items/FPSSLQKL?page=2&annotation=5VDUIS6B) 
- & flag street[ j].status âˆˆ {planned,built}, the classification in the hierarchy street[ j].hierarchy âˆˆ {ma jor,minor}, and a street width street[ j].width in meters. The induced cycles of the street graph (V,E) give rise to blocks (represented as polygonal faces). The quarters are induced cycles of the graph (Vma jor,Ema jor) i.e. all nodes and edges are marked as ma jor. The blocks can be further subdivided into building lots. The latter store a land use type lot[k].lut and a scalar land use value lot[k].luv describing its suitability [(p. 3)](zotero://open-pdf/library/items/FPSSLQKL?page=3&annotation=YHXF7UQH) 

- & ****  [(p. 3)](zotero://open-pdf/library/items/FPSSLQKL?page=3&annotation=2NULKZD9) ![[_Vault/_Attachments/image-3-x65-y495.png]]



- @ ****  [(p. 3)](zotero://open-pdf/library/items/FPSSLQKL?page=3&annotation=YAPARZJF) ![[_Vault/_Attachments/image-3-x63-y200.png]]


- @ New street segments street[i] are generated by a stochastic growth process. For each street segment, we compute a traffic value street[i].tra f fic and update the traffic [(p. 3)](zotero://open-pdf/library/items/FPSSLQKL?page=3&annotation=7IEUVQAY) 
- @ in the local neighborhood by using a traffic demand model. <br />
This results in new planned major streets. And as soon as enough traffic is on a new street, its status flag street[i].status is set to built. [(p. 3)](zotero://open-pdf/library/items/FPSSLQKL?page=3&annotation=224HMYMY) 
- @ When a new quarter is generated by street expansion, its dominant land use is estimated. The land use simulation searches for the optimal land use type according to the usergiven definitions (see section 4). Note that our framework is highly generic and can easily be configured to work with a large number of land use types. Then, according to the quarterâ€™s land use, the minor streets are generated, again with the street expansion algorithm. This results in new minor streets. [(p. 3)](zotero://open-pdf/library/items/FPSSLQKL?page=3&annotation=GDK4B2LW) 
- @ When a new block is generated by the minor streets, its land use is estimated based on the same simulation algorithm as above. The block is also recursively subdivided according to its land use value resulting in one or several lots (see section 5). The land use simulation is performed again on the lot level. If the new lot is located near a built street, given zoning regulations are computed, (according to the land use type) resulting in the final building envelope. The latter describes the volume wherein the final building will be constructed [(p. 3)](zotero://open-pdf/library/items/FPSSLQKL?page=3&annotation=7DDPCDRF) 

- $ ****  [(p. 4)](zotero://open-pdf/library/items/FPSSLQKL?page=4&annotation=JAAVQLY9) ![[_Vault/_Attachments/image-4-x41-y600.png]]


- & The expansion simulates growth of the street network. While the expansion strategy is inspired by [PM01], our approach has several differences: 1) In the original paper only the final result was meaningful, but the streets were not built in the correct order. In contrast, we use grow seeds (nodes which generate new street segments) in a temporally meaningful order. This can be done by selecting grow seeds via stochastic sampling of the existing nodes, rather than seed propagation typically used in context-sensitive L-systems. As a consequence we can incorporate user input specifying preferred expansion directions. 2) We chose not to embed the expansion in an L-system framework to make the implementation more efficient. 3) We present an incremental traffic demand model which can be integrated in our more general approach. This traffic demand model heavily influences the land use simulation and is necessary to derive the widths of the streets. [(p. 4)](zotero://open-pdf/library/items/FPSSLQKL?page=4&annotation=D9HP7BDZ) 
- @ In the first stage, we stochastically sample the street networkâ€™s unfinished major nodes to select where a street expansion can be applied, as follows: (1) The probability of selecting a node is proportional to eâˆ’ fnode[i].posâˆ’growthcenter[ j]2 which depends on the distance from the nearest growth center j and the user-controlled variable f (defining how strongly focused the growth is). (2) The overall ratio of the number of major nodes with valence 2 (i.e. two incident major streets) and the number of major nodes with valence 4 should correspond to a user-defined ratio (per street pattern). This assures that the size of quarters is fairly uniformly distributed. If a new quarter originates, the algorithm switches to the second stage and samples nodes within this quarter only, until the quarter is completely filled out with minor streets. A nodeâ€™s growth flag switches to finished if its valence becomes more than three or if the expansion fails multiple times. [(p. 4)](zotero://open-pdf/library/items/FPSSLQKL?page=4&annotation=TD2Y5B8H) 
- @ For each selected node we have to choose the following parameters to expand it: direction (straight, left, or right), angle deviation Ï† and length l. If the node has valence 1, the direction is always straight. If the node has valence 2, we randomly pick left or right, and if the node has valence 3, there is only one remaining expansion direction (see figure 5). The parameters Ï† and l are chosen depending on the street pattern. Similar to [PM01], we implemented three different street patterns (organic, grid and radial) which can be controlled globally via maps i.e. by painting weights, or - especially for minor streets within a quarter - are determined stochastically according to the user-defined land use types. <br />
The specific street patterns are also defined by the user: (1) For the organic street pattern, Ï† is chosen from a truncated Gaussian distribution with mean 0 and user-defined standard deviation Ï†Ïƒ. The length is computed similarly. (2) For the grid pattern, the angle deviation is always 0 degrees so that only two lengths ranges for the long and the perpendicular short streets have to be defined. (3) For the radial street pattern, there are two angle deviations. Either the next node lays on a circle around the center with the same radius as the current node, or the next node is on a ray pointing in the di [(p. 4)](zotero://open-pdf/library/items/FPSSLQKL?page=4&annotation=NMLT2D7D) 

- @ ****  [(p. 5)](zotero://open-pdf/library/items/FPSSLQKL?page=5&annotation=QDZNTL3K) ![[_Vault/_Attachments/image-5-x63-y591.png]]


- @ If a height map h(x, y) is given that maps every node[i].pos to a height value z, we have to adapt a proposed street segment as soon as its slope is above a user defined critical slope sc. In this case, the goal is to align the direction of the proposed street to either minimize or maximize its slope which is typical for streets in urban areas (e.g. San Francisco). Therefore, we use a simple steepest decent algorithm to align the proposed street segment (within angle deviation Ï†) into the direction of either the minimum or maximum slope of the terrain (whichever is the nearer). [(p. 5)](zotero://open-pdf/library/items/FPSSLQKL?page=5&annotation=YXSQFS5P) 
- @ Similar to the local constraints of [PM01], the proposed street segment is adapted to its local environment: (1) If an intersection is detected the street segment is shortened and the new node position is set to the intersection point. (2) To prevent nodes near to streets and short street segments in the future, we also enlarge the proposed segment by a factor 1.5 and test for a possible future intersection. If a future intersection is detected we slightly enlarge the street segment by setting the new node position to the future intersection point. (3) To prevent close-by intersections snapping can be used. A circle of user defined radius snapr (typically we set snapr = 25m) is inspected for other street nodes. If there is at least one node within this area, the proposed node position snaps to the nearest node. (4) The length of street segment is shortened, if it intersects with obstacles such as water, forests, or external objects given as constraints to the simulation. If the length is below a minimal street length threshold smin, the proposed street segment is rejected completely. <br />
(5) If the slope of the street exceeds a user defined maximum slope smax, the direction is aligned until its slope is below the [(p. 5)](zotero://open-pdf/library/items/FPSSLQKL?page=5&annotation=YD85FIC2) 

- @ ****  [(p. 5)](zotero://open-pdf/library/items/FPSSLQKL?page=5&annotation=2LRIETEU) ![[_Vault/_Attachments/image-5-x66-y135.png]]


- @ When all legality tests are passed the new node and street segment are added to the existing graph data structure. If snapping or an intersection occurred, new quarters (major streets) or blocks (minor streets) may originate i.e. either a new quarter or block is generated, or an existing quarter or block is split into two. We can detect these cases by elementary algorithms from graph theory for detecting induced cycles (we used a half-edge data structure for the graph i.e. cycles can be easily found via traversal). Note that, although their location will not change anymore, the newly generated streets are just planned. A street will be only be built when enough traffic demand is computed for the street. The computation of the traffic is described in the following [(p. 5)](zotero://open-pdf/library/items/FPSSLQKL?page=5&annotation=BXDHNHRB) 
### 4. Land Use Simulation

- @ The simulation tries to optimize a land use value function luv, that measures the value of the urban configuration [(p. 6)](zotero://open-pdf/library/items/FPSSLQKL?page=6&annotation=W5SFSNH9) 
- @ We therefore allow a designer to define a set of possible land use types T. A land use type is defined as a convex combination of individual land use valuation functions [(p. 7)](zotero://open-pdf/library/items/FPSSLQKL?page=7&annotation=X93NKX65) 

- @ ****  [(p. 7)](zotero://open-pdf/library/items/FPSSLQKL?page=7&annotation=ZB8RZ4VR) ![[_Vault/_Attachments/image-7-x69-y429.png]]


- @ The algorithm to update the land use values of existing lots is inspired by stochastic sampling algorithms, such as Metropolis-Hastings [CG95] and Simulated Annealing [KGV83]. [(p. 7)](zotero://open-pdf/library/items/FPSSLQKL?page=7&annotation=E8HK96UT) 



%% end annotations %%



%% Import Date: 2024-05-01T00:52:43.639+02:00 %%
